@model FitnessRecommendationViewModel
@{
    ViewData["Title"] = "AI Fitness √ñnerisi";
}

<!-- AI-powered fitness recommendation system -->
<div style="max-width:900px; margin:0 auto;">
    <h1 style="margin-bottom:8px;">ü§ñ AI Fitness Assistant</h1>
    <p style="color:#666; margin-bottom:32px;">Get personalized workout and nutrition plans powered by Google Gemini AI</p>

    @if (TempData["Error"] != null)
    {
        <div style="padding:12px; background:#ffebee; border:1px solid #ef5350; border-radius:6px; margin-bottom:20px; color:#c62828;">
            @TempData["Error"]
        </div>
    }

    <div style="display:grid; grid-template-columns:1fr 1fr; gap:32px;">
        <div>
            <form asp-action="FitnessRecommendation" method="post">
                @if(ViewData.ModelState.ErrorCount > 0){
                    <div asp-validation-summary="All" class="error" style="padding:12px; background:#ffebee; border:1px solid #ef5350; border-radius:6px; margin-bottom:20px;"></div>
                }

                <label asp-for="Height">Boy (cm)</label>
                <input asp-for="Height" type="number" placeholder="√ñrn: 175" />
                <span asp-validation-for="Height" class="error"></span>

                <label asp-for="Weight">Kilo (kg)</label>
                <input asp-for="Weight" type="number" placeholder="√ñrn: 70" />
                <span asp-validation-for="Weight" class="error"></span>

                <label asp-for="BodyType">V√ºcut Tipi</label>
                <select asp-for="BodyType">
                    <option value="">-- V√ºcut Tipinizi Se√ßin --</option>
                    <option value="Zayƒ±f">Zayƒ±f (Ektomorf)</option>
                    <option value="Normal">Normal (Mezomorf)</option>
                    <option value="Kilolu">Kilolu (Endomorf)</option>
                    <option value="Atletik">Atletik</option>
                </select>
                <span asp-validation-for="BodyType" class="error"></span>

                <label asp-for="Goal">Hedefim</label>
                <textarea asp-for="Goal" rows="4" placeholder="Hedeflerinizi detaylƒ± yazƒ±n. √ñrn: Kilo vermek, kas yapmak, formda kalmak, dayanƒ±klƒ±lƒ±k artƒ±rmak vb."></textarea>
                <span asp-validation-for="Goal" class="error"></span>

                <div style="margin-top:24px;">
                    <button type="submit" style="width:100%; padding:14px; font-size:16px;">
                        ‚ú® AI √ñnerisi Al
                    </button>
                </div>
            </form>
        </div>

        <div>
            @if (!string.IsNullOrEmpty(Model.Recommendation))
            {
                <div style="background:#f5f5f5; padding:24px; border-radius:8px; border:1px solid #e0e0e0; box-shadow:0 2px 8px rgba(0,0,0,0.1);">
                    <h3 style="margin-top:0; color:#1976d2; display:flex; align-items:center; gap:8px;">
                        <span style="font-size:24px;">üìã</span>
                        Sizin ƒ∞√ßin √ñzel Plan
                    </h3>
                    <div style="white-space:pre-wrap; line-height:1.8; color:#333; font-size:15px;">
                        @Html.Raw(System.Text.RegularExpressions.Regex.Replace(
                            Model.Recommendation
                                .Replace("##", "<h4 style='color:#1976d2; margin-top:20px; margin-bottom:10px;'>")
                                .Replace("\n\n", "</h4>")
                                .Replace("**", "<strong>")
                                .Replace("**", "</strong>")
                                .Replace("*", "<li>")
                                .Replace("\n", "<br/>"),
                            @"\d+\.\s", "<li>"))
                    </div>
                </div>
            }
            else
            {
                <div style="background:#f5f5f5; padding:40px; border-radius:8px; border:1px solid #e0e0e0; text-align:center; color:#999; box-shadow:0 2px 8px rgba(0,0,0,0.05);">
                    <div style="font-size:64px; margin-bottom:16px; animation:bounce 2s infinite;">üèãÔ∏è</div>
                    <p style="font-size:16px; font-weight:500; margin:0 0 8px 0;">Fitness √∂neriniz burada g√∂r√ºnecek</p>
                    <p style="font-size:14px; margin:8px 0 0 0; color:#bbb;">Formu doldurun ve AI destekli ki≈üiselle≈ütirilmi≈ü planƒ±nƒ±zƒ± alƒ±n</p>
                </div>
            }
        </div>
    </div>

    <div style="margin-top:32px; padding:20px; background:#e3f2fd; border-radius:8px; border-left:4px solid #1976d2; box-shadow:0 1px 4px rgba(25,118,210,0.15);">
        <h4 style="margin-top:0; color:#1976d2; display:flex; align-items:center; gap:8px;">
            <span style="font-size:20px;">üí°</span>
            ƒ∞pucu
        </h4>
        <p style="margin:0; color:#555; font-size:15px;">
            Daha detaylƒ± hedef yazdƒ±k√ßa, AI daha ki≈üiselle≈ütirilmi≈ü ve faydalƒ± √∂neriler sunabilir. 
            Mevcut saƒülƒ±k durumunuz, ya≈üam tarzƒ±nƒ±z ve egzersiz ge√ßmi≈üiniz hakkƒ±nda bilgi verin.
        </p>
    </div>
</div>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}

<style>
    label {
        display: block;
        margin-top: 16px;
        margin-bottom: 8px;
        font-weight: 600;
        color: #333;
    }

    input[type="text"],
    input[type="number"],
    select,
    textarea {
        width: 100%;
        padding: 12px;
        border: 1px solid #ddd;
        border-radius: 6px;
        font-size: 14px;
        box-sizing: border-box;
    }

    input:focus,
    select:focus,
    textarea:focus {
        outline: none;
        border-color: #1976d2;
        box-shadow: 0 0 0 3px rgba(25, 118, 210, 0.1);
    }

    button {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border: none;
        border-radius: 6px;
        padding: 12px 24px;
        font-size: 14px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    button:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
    }

    .error {
        color: #c62828;
        font-size: 13px;
        margin-top: 4px;
        display: block;
    }

    h4 {
        color: #1976d2;
        margin-top: 20px;
        margin-bottom: 10px;
    }

    strong {
        color: #333;
        font-weight: 600;
    }

    li {
        margin-left: 20px;
        margin-bottom: 8px;
    }
</style>
